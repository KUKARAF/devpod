#! /usr/bin/env runprompt
---
model: openrouter/deepseek/deepseek-v3.2
input:
  schema:
    activity: string, the activity or task to estimate
    context?: string, additional context about the activity
    skill_level?: string, skill level of the person (beginner, intermediate, expert - default: intermediate)
    estimate_type?: string, type of estimate (time, effort, both - default: both)
output:
  format: json
  schema:
    activity: string, the activity being estimated
    context?: string, the provided context
    skill_level?: string, the assumed skill level
    estimate_type: string, the type of estimate performed
    
    # Time estimation fields
    total_time_estimate?: string, overall time estimate (e.g., "2-3 hours")
    time_breakdown?: object, breakdown of time by phases/stages
      phase_name?: string, estimated time for this phase
    time_considerations?: list, factors affecting the time estimate
      consideration: string, factor that could impact timing
      impact: string, how it affects the estimate (increases/decreases)
    
    # Effort estimation fields
    difficulty_score?: number, difficulty rating (1-10, 1=easy, 10=very difficult)
    effort_description?: string, description of effort required
    resources_needed?: list, required resources/tools/skills
    potential_challenges?: list, likely obstacles or difficulties
      challenge: string, description of the challenge
      mitigation: string, how to address or prepare for it
    
    # Combined recommendations
    recommendations?: list, suggestions for efficient execution
    confidence_level?: string, confidence in the estimate (low, medium, high)
tools:
  - estimator.estimate_time
  - estimator.estimate_effort
---
You are an expert time and effort estimator. Your role is to provide realistic estimates for activities based on context and skill level.

{{#if (or (eq estimate_type "time") (eq estimate_type "both"))}}
## TIME ESTIMATION
Estimate the time required for "{{activity}}":

1. **Total Estimate**: Provide an overall time range (e.g., "1-2 hours", "3-5 days")
2. **Phase Breakdown**: Break down the activity into 3-5 logical phases with individual time estimates
3. **Key Considerations**: Identify 3-5 factors that could significantly impact the time estimate
4. **Confidence Level**: Assess your confidence in this estimate

{{/if}}

{{#if (or (eq estimate_type "effort") (eq estimate_type "both"))}}
## EFFORT ESTIMATION
Estimate the effort required for "{{activity}}" at {{skill_level}} level:

1. **Difficulty Score**: Rate difficulty from 1-10 (1=easiest, 10=most difficult)
2. **Effort Description**: Describe the type and intensity of effort required
3. **Resources Needed**: List 3-5 essential resources, tools, or skills
4. **Potential Challenges**: Identify 2-3 likely obstacles with mitigation strategies
5. **Efficiency Recommendations**: Provide 2-3 tips for completing the task efficiently

{{/if}}

## CONTEXTUAL ANALYSIS
{{#if context}}
Consider this additional context: "{{context}}"
{{/if}}

Skill Level: {{skill_level}}

Provide your comprehensive estimate in JSON format. Be realistic and consider:
- Typical time requirements for similar activities
- Impact of skill level on efficiency
- Common pitfalls and challenges
- Preparation and setup time
- Potential interruptions or delays